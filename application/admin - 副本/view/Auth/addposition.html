<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>添加角色</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">

		<link rel="stylesheet" href="__PUBLIC__static/plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="__PUBLIC__static/plugins/font-awesome/css/font-awesome.min.css">
	</head>
<style>
	.list-menu ul{padding-left: 40px;}
	.list-menu li{position: relative;}
	.list-menu li:before{content: "";display: block;width: 1px;height: 100%;border-left: 1px dashed #000; position: absolute;top: 5px;left: 5px;}
</style>
<body style="background: #fff">
	<div style="margin: 15px;">
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
		<legend>添加角色</legend>
	</fieldset>
		<form action="{:url('auth/addposition')}" method="post">
				<div class="layui-form-item">
					<label class="layui-form-label">角色名称</label>
					<div class="layui-input-block">
						<input type="text" name="po_name" lay-verify="title" autocomplete="off" placeholder="角色名称" class="layui-input">
					</div>
				</div>
	<div class="layui-form-item">
	<label class="layui-form-label">权限列表</label>
		<div class="layui-input-block list-menu">
			<ul class="metismenu" id="menu">
				{volist name="authA" id="v"}
				<li >
					<p>
						<input type="checkbox" class="layui-form-checkbox" id="filled-in-box-{$v.au_id}"  name="au_id[]" value="{$v.au_id}" />
						<label for="filled-in-box-{$v.au_id}">---{$v.au_name}</label>
					</p>
					<!-- <a href="javascript:;" >
						<span>{$v.au_name}</span>
					</a> -->
					<ul class="nav nav-second-level">
						{volist name="authB" id="vv"}
						{if condition="$v['au_id'] eq $vv['au_parent']"}
						<li>
							<p>
								<input type="checkbox" class="layui-form-checkbox" id="layui-form-checkbox-{$vv.au_id}"  name="au_id[]" value="{$vv.au_id}" />
								<label for="layui-form-checkbox-{$vv.au_id}">{$vv.au_name}</label>
							</p>
							<!-- <a href="javascript:;" >
								<span>{$vv.au_name}</span>
							</a> -->
							<ul class="ulstyle" >
								{volist name="authC" id="vo"}
								{if condition="$vv['au_id'] eq $vo['au_parent']"}
								<li>
									<p >
										<input type="checkbox" class="layui-form-checkbox" id="layui-form-checkbox-{$vo.au_id}"   name="au_id[]" value="{$vo.au_id}" />
										<label for="layui-form-checkbox-{$vo.au_id}">{$vo.au_name}</label>
									</p>
									<!-- <a href="javascript:;" >
										<span>{$vo.au_name}</span>
									</a> -->
								</li>
								{/if}
								{/volist}
							</ul>
						</li>
						{/if}
						{/volist}
					</ul>
				</li>
				{/volist}
			</ul>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-input-block">
			<button class="layui-btn" lay-submit="" lay-filter="demo1" onclick="return yz()">立即提交</button>
		</div>
	</div>
		</form>
	</div>
	<script type="text/javascript" src="__PUBLIC__static/plugins/layui/layui.js"></script>
	<script type="text/javascript" src="__PUBLIC__static/js/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function($) {
			$(".list-menu :checkbox").on('click', function(event) {
				event.stopPropagation();
				if(this.checked){
					$(this).parent('p').siblings().find(':checkbox').prop("checked", true);
				}else{
					$(this).parent('p').siblings().find(':checkbox').prop("checked", false);
				}
				
			});
		});
		function yz(){
			if($("[name='po_name']").val() == ""){
				alert("角色名称不能为空");
				return false;
			}
			if(!$("[type='checkbox']").is(':checked')){
				alert("请选择权限栏目");
				return false;
			}
			return true;
		}
	</script>
</body>
</html>